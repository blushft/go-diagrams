label: App
direction: Forward
groups:
- name: GCP
  label: GCP
  nodes:
  - name: load-balancer
    type: gcp.Network.LoadBalancing
    connectTo:
      - server-1[443/TCP]
      - server-2
      - server-3
  - name: dns
    label: DNS
    type: gcp.Network.DNS
    connectTo:
    - load-balancer
  groups:
  - name: services
    backgroundColor: aqua
    label: Service
    nodes:
    - label: "Server 1"
      type: gcp.Compute.ComputeEngine
      name: "server-1"
    - label: "Server 2"
      name: "server-2"
      type: gcp.Compute.ComputeEngine
    - label: "Server 3"
      name: "server-3"
      type: gcp.Compute.ComputeEngine
    connectAllFrom:
    - load-balancer
    connectAllTo:
    - cache
  - name: data
    label: Data
    nodes:
    - name: cache
      label: "Cache"
      type: gcp.Database.Memorystore
      connectTo:
      - db
    - name: db
      label: "Database"
      type: gcp.Database.Sql


